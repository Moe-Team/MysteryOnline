<LoginScreen>:
    username: username_input.text

    BoxLayout:
        orientation: 'vertical'
        size_hint: None, None
        size: 300, 150
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

        TextInput:
            id: username_input
            on_text_validate: root.on_login_clicked()
            multiline: False
            text: "TestingMO"

        Button:
            text: "Log in"
            on_release: root.on_login_clicked()

        Button:
            text: "Choose character"
            on_release: root.on_select_clicked()

        Button:
            text: "Settings"
            on_release: app.open_settings()


<LogWindow>:
    log: log

    Label:
        id: log
        markup: True
        text_size: self.width, None
        size_hint_y: None
        height: self.texture_size[1]


<SpriteWindow>:
    background: background
    center_sprite: center_s
    left_sprite: left_s
    right_sprite: right_s

    Image:
        id: background
        size: root.size
        pos: root.pos

        StencilView:
            size: root.size
            pos: root.pos

            FloatLayout:
                size: root.size
                pos: root.pos

                Image:
                    id: center_s
                    opacity: 0
                    size_hint: None, None
                    size: 600, 600
                    pos_hint: {'center_x': 0.5, 'y': 0}

                Image:
                    id: left_s
                    opacity: 0
                    size_hint: None, None
                    size: 600, 600
                    pos_hint: {'center_x': 0.25, 'y': 0}

                Image:
                    id: right_s
                    opacity: 0
                    size_hint: None, None
                    size: 600, 600
                    pos_hint: {'center_x': 0.75, 'y': 0}


<MainScreen>:
    icons_layout: icons_layout
    sprite_preview: sprite_preview
    sprite_window: sprite_window
    msg_input: msg_input
    toolbar: toolbar
    text_box: text_box
    log_window: log_window
    ooc_window: ooc_window
    left_tab: left_tab
    sprite_settings: sprite_settings

    FloatLayout:
        SpriteWindow:
            id: sprite_window
            size_hint: None, None
            size: 800, 600
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

        TextBox:
            id: text_box
            size_hint: None, None
            size: 800, 170
            pos: sprite_window.x, sprite_window.y
            font_size: 20
            text_size: self.size
            color: 1, 1, 1, 1
            halign: 'left'
            valign: 'top'
            canvas:
                Color:
                    rgba: 0.3, 0.3, 0.3, 0.2
                Rectangle:
                    pos: self.pos
                    size: self.size


        TextInput:
            id: msg_input
            multiline: False
            size_hint: None, None
            size: 800, 30
            pos: sprite_window.x, sprite_window.y - 35

        LogWindow:
            id: log_window
            size_hint: None, None
            x: sprite_window.right + 5
            top: sprite_window.top
            size: 250, 300

        OOCWindow:
            id: ooc_window
            size_hint: None, None
            size: 250, 330
            x: log_window.x
            top: log_window.y

        IconsLayout:
            id: icons_layout
            size_hint: None, None
            size: 250, 300
            right: sprite_window.x - 20
            y: sprite_window.y

        LeftTab:
            id: left_tab
            y: icons_layout.top + 5
            x: icons_layout.x
            size_hint: None, None
            size: 800 / 3, 340

            TabbedPanelItem:
                text: "Preview"

                BoxLayout:
                    size: left_tab.size
                    pos: left_tab.pos
                    orientation: 'vertical'

                    SpritePreview:
                        id: sprite_preview
                        size_hint: None, None
                        size: 800 / 3, 600 / 3

                    SpriteSettings:
                        id: sprite_settings
                        ize_hint: None, None
                        size: 800 / 3, 140

        Toolbar:
            id: toolbar
            size_hint: None, None
            size: 800, 30
            pos: msg_input.x, msg_input.y - 30


<SpriteSettings>:
    orientation: 'vertical'


<LeftTab>:

    do_default_tab: False
    tab_width: 60

    TabbedPanelItem:
        text: "Other"


<OOCWindow>:

    user_list: user_list
    ooc_chat: ooc_chat
    ooc_chat_header: ooc_chat_header
    ooc_input: ooc_input
    blip_slider: blip_slider
    music_slider: music_slider
    effect_slider: effect_slider
    url_input: url_input
    loop_checkbox: loop_checkbox

    do_default_tab: False
    tab_width: 60

    TabbedPanelItem:
        text: 'OOC'
        id: ooc_chat_header

        BoxLayout:
            orientation: 'vertical'

            ScrollView:
                Label:
                    id: ooc_chat
                    halign: 'left'
                    valign: 'top'
                    font_size: 16
                    text_size: self.width, None
                    size_hint_y: None
                    height: self.texture_size[1]
                    markup: True

            TextInput:
                id: ooc_input
                size_hint: 1, None
                height: 30
                multiline: False
                on_text_validate: root.send_ooc()

    TabbedPanelItem:
        text: 'Online'

        BoxLayout:
            orientation: 'vertical'
            halign: 'left'
            id: user_list


    TabbedPanelItem:
        text: 'Volume'

        BoxLayout:
            orientation: 'vertical'

            Label:
                text: "Blips"
                size_hint: 1, None
                height: 30

            Slider:
                id: blip_slider
                size_hint: 1, 1
                min: 0
                max: 100
                on_value: root.on_slider_blip_value()

            Label:
                text: "Music"
                size_hint: 1, None
                height: 30

            Slider:
                id: music_slider
                size_hint: 1, 1
                min: 0
                max: 100
                on_value: root.on_slider_music_value()

            Label:
                text: "Sound effects"
                size_hint: 1, None
                height: 30

            Slider:
                id: effect_slider
                size_hint: 1, 1
                min: 0
                max: 100
                on_value: root.on_slider_effect_value()

    TabbedPanelItem:
        text: 'Music'

        BoxLayout:
            orientation: 'vertical'

            TextInput:
                id: url_input
                multiline: False
                on_text_validate: root.on_music_play()
                size_hint: 1, None
                height: 30

            BoxLayout:

                size_hint: 1, None
                height: 40

                Button:
                    text: "Play"
                    on_release: root.on_music_play()
                    size_hint: None, None
                    height: 40
                Button:
                    text: "Stop"
                    on_release: root.music_stop()
                    size_hint: None, None
                    height: 40

            BoxLayout:

                size_hint: 1, None
                height: 40

                Label:
                    text: 'Loop'

                CheckBox:
                    id: loop_checkbox
                    active: True


<TextBox>:
    char_name: char_name

    Label:
        id: char_name
        pos: root.x, root.top
        size_hint: None, None
        size: 200, 30
        text_size: self.size
        halign: 'left'
        valign: 'top'
        font_size: 20
        canvas:
            Color:
                rgba: 0.4, 0.4, 0.4, 0.4
            Rectangle:
                pos: self.pos
                size: self.size


<SpritePreview>:
    center_sprite: center_s

    StencilView:
        size: root.size
        pos: root.pos

        FloatLayout:
            size: root.size
            pos: root.pos

            Image:
                id: center_s
                opacity: 0
                size_hint: None, None
                size: 200, 200
                pos_hint: {'center_x': 0.5, 'y': 0}

<PrivateMessageScreen>:
    size_hint: 0.8, 0.8

    BoxLayout
        orientation: 'horizontal'

        BoxLayout:
            orientation: 'vertical'

            ScrollView:
                size_hint: 0.8, 1

                BoxLayout:
                    orientation: 'vertical'
                    id: prv_msg_scroll

            BoxLayout:
                orientation: 'vertical'
                id: pm_input

                TextInput:
                    id: pm_input
                    on_text_validate: root.send_pm()
                    multiline: False
                    height: 30
                    size_hint: 1, None

        BoxLayout:
            size_hint: 0.2, 1
            orientation: 'vertical'

            ScrollView:
                valign: 'top'
                size_hint: 1, 0.9
                title: 'User list'
                id: prv_users_scroll

                BoxLayout
                    valign: 'top'
                    size_hint: 1, 1
                    orientation: 'vertical'
                    id: prv_users_list

            Button:
                size_hint: 1, None
                valign: 'bottom'
                text: 'Close'
                on_release: root.prv_chat_close_btn()
                id: prv_chat_btn

<PrivateMessage>

    BoxLayout:
        id: 'pm_body'
        orientation: 'horizontal'
        size_hint: 1, 0.2

        Image:
            id: 'pm_icon'
            size_hint: 0.2, 1

        Label:
            id: 'pm_text'
            text: ''
            size_hint: 0.8, 1



<RightClickMenu>:
    char_select: char_select

    size_hint: None, None
    size: 105, 300

    BoxLayout:
        orientation: 'vertical'

        Button:
            id: char_select
            size_hint: None, None
            size: 100, 30
            text: 'Character'
            on_release: root.on_char_select_clicked()

        Button:
            id: settings
            size_hint: None, None
            size: 100, 30
            text: 'Settings'
            on_release: root.on_settings_clicked()


<CharacterSelect>:
    main_lay: main_lay
    button_lay: button_lay
    scroll_lay: scroll_lay

    FloatLayout:
        orientation: 'vertical'
        id: button_lay

        ScrollView:
            pos_hint: {'top': 1, 'x': 0}
            size_hint: 1, None
            height: root.height - 100
            id: scroll_lay

            BoxLayout:
                orientation: 'vertical'
                size_hint: 1, None
                id: main_lay


<MainScreenManager>:
    main_screen: main_screen
    LoginScreen:
        name: "login"
        id: login_screen

    MainScreen:
        name: "main"
        id: main_screen

    SettingsScreen:
        name: "settings"
        id: settings_screen

